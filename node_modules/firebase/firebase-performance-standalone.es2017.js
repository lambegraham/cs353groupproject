!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()***REMOVED***(this,function(){"use strict";function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===e&&(e={***REMOVED***);break;case Array:e=[];break;default:return n***REMOVED***for(const r in n)n.hasOwnProperty(r)&&(e[r]=t(e[r],n[r]));return e***REMOVED***const e="FirebaseError";class n extends Error{constructor(t,i){super(i),this.code=t,this.name=e,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r.prototype.create)***REMOVED******REMOVED***class r{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n***REMOVED***create(t,...e){const r=e[0]||{***REMOVED***,o=`${this.service***REMOVED***/${t***REMOVED***`,a=this.errors[t],s=a?function(t,e){return t.replace(i,(t,n)=>{const r=e[n];return null!=r?r.toString():`<${n***REMOVED***?>`***REMOVED***)***REMOVED***(a,r):"Error",c=`${this.serviceName***REMOVED***: ${s***REMOVED*** (${o***REMOVED***).`,u=new n(o,c);for(const t of Object.keys(r))"_"!==t.slice(-1)&&(t in u&&console.warn(`Overwriting FirebaseError base field "${t***REMOVED***" can cause unexpected behavior.`),u[t]=r[t]);return u***REMOVED******REMOVED***const i=/\{\$([^***REMOVED***]+)***REMOVED***/g;function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)***REMOVED***var a;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"***REMOVED***(a||(a={***REMOVED***));const s=a.INFO,c=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString();switch(e){case a.DEBUG:case a.VERBOSE:console.log(`[${r***REMOVED***]  ${t.name***REMOVED***:`,...n);break;case a.INFO:console.info(`[${r***REMOVED***]  ${t.name***REMOVED***:`,...n);break;case a.WARN:console.warn(`[${r***REMOVED***]  ${t.name***REMOVED***:`,...n);break;case a.ERROR:console.error(`[${r***REMOVED***]  ${t.name***REMOVED***:`,...n);break;default:throw new Error(`Attempted to log a message with an invalid logType (value: ${e***REMOVED***)`)***REMOVED******REMOVED***;class u{constructor(t){this.name=t,this._logLevel=s,this._logHandler=c***REMOVED***get logLevel(){return this._logLevel***REMOVED***set logLevel(t){if(!(t in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t***REMOVED***get logHandler(){return this._logHandler***REMOVED***set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t***REMOVED***debug(...t){this._logHandler(this,a.DEBUG,...t)***REMOVED***log(...t){this._logHandler(this,a.VERBOSE,...t)***REMOVED***info(...t){this._logHandler(this,a.INFO,...t)***REMOVED***warn(...t){this._logHandler(this,a.WARN,...t)***REMOVED***error(...t){this._logHandler(this,a.ERROR,...t)***REMOVED******REMOVED***const l=new r("app","Firebase",{"no-app":"No Firebase App '{$appName***REMOVED***' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName***REMOVED***","duplicate-app":"Firebase App named '{$appName***REMOVED***' already exists","app-deleted":"Firebase App named '{$appName***REMOVED***' already deleted","invalid-app-argument":"firebase.{$appName***REMOVED***() takes either no argument or a Firebase App instance."***REMOVED***),p="[DEFAULT]";class f{constructor(e,n,r){this.firebase_=r,this.isDeleted_=!1,this.services_={***REMOVED***,this.INTERNAL={***REMOVED***,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=t(void 0,e)***REMOVED***get automaticDataCollectionEnabled(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_***REMOVED***set automaticDataCollectionEnabled(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t***REMOVED***get name(){return this.checkDestroyed_(),this.name_***REMOVED***get options(){return this.checkDestroyed_(),this.options_***REMOVED***delete(){return new Promise(t=>{this.checkDestroyed_(),t()***REMOVED***).then(()=>{this.firebase_.INTERNAL.removeApp(this.name_);const t=[];for(const e of Object.keys(this.services_))for(const n of Object.keys(this.services_[e]))t.push(this.services_[e][n]);return Promise.all(t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()))***REMOVED***).then(()=>{this.isDeleted_=!0,this.services_={***REMOVED******REMOVED***)***REMOVED***_getService(t,e=p){if(this.checkDestroyed_(),this.services_[t]||(this.services_[t]={***REMOVED***),!this.services_[t][e]){const n=e!==p?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r***REMOVED***return this.services_[t][e]***REMOVED***extendApp(e){t(this,e)***REMOVED***checkDestroyed_(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_***REMOVED***)***REMOVED******REMOVED***const h="7.2.0",d=new u("@firebase/app");const g=function(){const e=function(e){const n={***REMOVED***,r={***REMOVED***,i={***REMOVED***,a={__esModule:!0,initializeApp:function(t,r={***REMOVED***){if("object"!=typeof r||null===r){const t=r;r={name:t***REMOVED******REMOVED***const i=r;void 0===i.name&&(i.name=p);const{name:s***REMOVED***=i;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)***REMOVED***);if(o(n,s))throw l.create("duplicate-app",{appName:s***REMOVED***);const c=new e(t,i,a);return n[s]=c,u(c,"create"),c***REMOVED***,app:s,apps:null,SDK_VERSION:h,INTERNAL:{registerService:function(n,o,u,p,f=!1){if(r[n])return d.debug(`There were multiple attempts to register service ${n***REMOVED***.`),a[n];function h(t=s()){if("function"!=typeof t[n])throw l.create("invalid-app-argument",{appName:n***REMOVED***);return t[n]()***REMOVED***return r[n]=o,p&&(i[n]=p,c().forEach(t=>{p("create",t)***REMOVED***)),void 0!==u&&t(h,u),a[n]=h,e.prototype[n]=function(...t){return this._getService.bind(this,n).apply(this,f?t:[])***REMOVED***,h***REMOVED***,removeApp:function(t){u(n[t],"delete"),delete n[t]***REMOVED***,factories:r,useAsService:f***REMOVED******REMOVED***;function s(t){if(!o(n,t=t||p))throw l.create("no-app",{appName:t***REMOVED***);return n[t]***REMOVED***function c(){return Object.keys(n).map(t=>n[t])***REMOVED***function u(t,e){for(const n of Object.keys(r)){const r=f(0,n);if(null===r)return;i[r]&&i[r](e,t)***REMOVED******REMOVED***function f(t,e){return"serverAuth"===e?null:e***REMOVED***return a.default=a,Object.defineProperty(a,"apps",{get:c***REMOVED***),s.App=e,a***REMOVED***(f);e.SDK_VERSION=`${e.SDK_VERSION***REMOVED***_LITE`;const n=e.INTERNAL.registerService;return e.INTERNAL.registerService=function(t,e,r,i,o){if("performance"!==t&&"installations"!==t)throw Error(`${t***REMOVED*** cannot register with the standalone perf instance`);return n(t,e,r,i,o)***REMOVED***,e***REMOVED***();function m(t){return Array.prototype.slice.call(t)***REMOVED***function b(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)***REMOVED***,t.onerror=function(){n(t.error)***REMOVED******REMOVED***)***REMOVED***function _(t,e,n){var r,i=new Promise(function(i,o){b(r=t[e].apply(t,n)).then(i,o)***REMOVED***);return i.request=r,i***REMOVED***function w(t,e,n){var r=_(t,e,n);return r.then(function(t){if(t)return new T(t,r.request)***REMOVED***)***REMOVED***function y(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]***REMOVED***,set:function(t){this[e][n]=t***REMOVED******REMOVED***)***REMOVED***)***REMOVED***function v(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return _(this[e],r,arguments)***REMOVED***)***REMOVED***)***REMOVED***function E(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)***REMOVED***)***REMOVED***)***REMOVED***function I(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return w(this[e],r,arguments)***REMOVED***)***REMOVED***)***REMOVED***function S(t){this._index=t***REMOVED***function T(t,e){this._cursor=t,this._request=e***REMOVED***function A(t){this._store=t***REMOVED***function N(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()***REMOVED***,t.onerror=function(){n(t.error)***REMOVED***,t.onabort=function(){n(t.error)***REMOVED******REMOVED***)***REMOVED***function k(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new N(n)***REMOVED***function O(t){this._db=t***REMOVED***y(S,"_index",["name","keyPath","multiEntry","unique"]),v(S,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),I(S,"_index",IDBIndex,["openCursor","openKeyCursor"]),y(T,"_cursor",["direction","key","primaryKey","value"]),v(T,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(T.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),b(e._request).then(function(t){if(t)return new T(t,e._request)***REMOVED***)***REMOVED***)***REMOVED***)***REMOVED***),A.prototype.createIndex=function(){return new S(this._store.createIndex.apply(this._store,arguments))***REMOVED***,A.prototype.index=function(){return new S(this._store.index.apply(this._store,arguments))***REMOVED***,y(A,"_store",["name","keyPath","indexNames","autoIncrement"]),v(A,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),I(A,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),E(A,"_store",IDBObjectStore,["deleteIndex"]),N.prototype.objectStore=function(){return new A(this._tx.objectStore.apply(this._tx,arguments))***REMOVED***,y(N,"_tx",["objectStoreNames","mode"]),E(N,"_tx",IDBTransaction,["abort"]),k.prototype.createObjectStore=function(){return new A(this._db.createObjectStore.apply(this._db,arguments))***REMOVED***,y(k,"_db",["name","version","objectStoreNames"]),E(k,"_db",IDBDatabase,["deleteObjectStore","close"]),O.prototype.transaction=function(){return new N(this._db.transaction.apply(this._db,arguments))***REMOVED***,y(O,"_db",["name","version","objectStoreNames"]),E(O,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[A,S].forEach(function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=m(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)***REMOVED******REMOVED***)***REMOVED***)***REMOVED***),[S,A].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)***REMOVED***)***REMOVED***)***REMOVED***)***REMOVED***);const D=1e4,R="w:0.3.0",j="FIS_v2",$="https://firebaseinstallations.googleapis.com/v1",P=36e5,M=new r("installations","Installations",{"missing-app-config-values":"Missing App configuration values.","create-installation-failed":"Could not register Firebase Installation.","generate-token-failed":"Could not generate Auth Token.","not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName***REMOVED*** request failed with error "{$serverCode***REMOVED*** {$serverStatus***REMOVED***: {$serverMessage***REMOVED***"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."***REMOVED***);function C(t){return t instanceof n&&t.code.includes("request-failed")***REMOVED***function L(t){if(!t||!t.options)throw M.create("missing-app-config-values");const e=t.name,{projectId:n,apiKey:r,appId:i***REMOVED***=t.options;if(!(e&&n&&r&&i))throw M.create("missing-app-config-values");return{appName:e,projectId:n,apiKey:r,appId:i***REMOVED******REMOVED***function B({projectId:t***REMOVED***){return`${$***REMOVED***/projects/${t***REMOVED***/installations`***REMOVED***function q(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()***REMOVED***;var e***REMOVED***async function F(t,e){const n=(await e.json()).error;return M.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status***REMOVED***)***REMOVED***function U({apiKey:t***REMOVED***){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t***REMOVED***)***REMOVED***function x(t,{refreshToken:e***REMOVED***){const n=U(t);return n.append("Authorization",function(t){return`${j***REMOVED*** ${t***REMOVED***`***REMOVED***(e)),n***REMOVED***async function K(t){const e=await t();return e.status>=500&&e.status<600?t():e***REMOVED***function V(t){return new Promise(e=>{setTimeout(e,t)***REMOVED***)***REMOVED***const H=/^[cdef][\w-]{21***REMOVED***$/,W="";function J(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e***REMOVED***(t);return H.test(e)?e:W***REMOVED***catch(t){return W***REMOVED******REMOVED***const z="firebase-installations-database",G=1,Z="firebase-installations-store";let Q=null;function X(){return Q||(Q=function(t,e,n){var r=_(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new k(i.result,t.oldVersion,i.transaction))***REMOVED***),r.then(function(t){return new O(t)***REMOVED***)***REMOVED***(z,G,t=>{switch(t.oldVersion){case 0:t.createObjectStore(Z)***REMOVED******REMOVED***)),Q***REMOVED***async function Y(t,e){const n=nt(t),r=(await X()).transaction(Z,"readwrite");return await r.objectStore(Z).put(e,n),await r.complete,e***REMOVED***async function tt(t){const e=nt(t),n=(await X()).transaction(Z,"readwrite");await n.objectStore(Z).delete(e),await n.complete***REMOVED***async function et(t,e){const n=nt(t),r=(await X()).transaction(Z,"readwrite"),i=r.objectStore(Z),o=e(await i.get(n));return void 0===o?await i.delete(n):await i.put(o,n),await r.complete,o***REMOVED***function nt(t){return`${t.appName***REMOVED***!${t.appId***REMOVED***`***REMOVED***async function rt(t){let e;const n=await et(t,n=>{const r=function(t){return at(t||{fid:J(),registrationStatus:0***REMOVED***)***REMOVED***(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){const t=Promise.reject(M.create("app-offline"));return{installationEntry:e,registrationPromise:t***REMOVED******REMOVED***const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()***REMOVED***,r=async function(t,e){try{const n=await async function(t,{fid:e***REMOVED***){const n=B(t),r=U(t),i={fid:e,authVersion:j,appId:t.appId,sdkVersion:R***REMOVED***,o={method:"POST",headers:r,body:JSON.stringify(i)***REMOVED***,a=await K(()=>fetch(n,o));if(a.ok){const t=await a.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:q(t.authToken)***REMOVED******REMOVED***throw await F("Create Installation",a)***REMOVED***(t,e);return Y(t,n)***REMOVED***catch(n){throw C(n)&&409===n.serverCode?await tt(t):await Y(t,{fid:e.fid,registrationStatus:0***REMOVED***),n***REMOVED******REMOVED***(t,n);return{installationEntry:n,registrationPromise:r***REMOVED******REMOVED***return 1===e.registrationStatus?{installationEntry:e,registrationPromise:it(t)***REMOVED***:{installationEntry:e***REMOVED******REMOVED***(t,r);return e=i.registrationPromise,i.installationEntry***REMOVED***);return n.fid===W?{installationEntry:await e***REMOVED***:{installationEntry:n,registrationPromise:e***REMOVED******REMOVED***async function it(t){let e=await ot(t);for(;1===e.registrationStatus;)await V(100),e=await ot(t);if(0===e.registrationStatus)throw M.create("create-installation-failed");return e***REMOVED***function ot(t){return et(t,t=>{if(!t)throw M.create("installation-not-found");return at(t)***REMOVED***)***REMOVED***function at(t){return 1===(e=t).registrationStatus&&e.registrationTime+D<Date.now()?{fid:t.fid,registrationStatus:0***REMOVED***:t;var e***REMOVED***async function st(t,e){const n=function(t,{fid:e***REMOVED***){return`${B(t)***REMOVED***/${e***REMOVED***/authTokens:generate`***REMOVED***(t,e),r=x(t,e),i={installation:{sdkVersion:R***REMOVED******REMOVED***,o={method:"POST",headers:r,body:JSON.stringify(i)***REMOVED***,a=await K(()=>fetch(n,o));if(a.ok){return q(await a.json())***REMOVED***throw await F("Generate Auth Token",a)***REMOVED***async function ct(t,e=!1){let n;const r=await et(t,r=>{if(!lt(r))throw M.create("not-registered");const i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+P***REMOVED***(t)***REMOVED***(i))return r;if(1===i.requestStatus)return n=async function(t){let e=await ut(t);for(;1===e.authToken.requestStatus;)await V(100),e=await ut(t);const n=e.authToken;if(0===n.requestStatus)throw M.create("generate-token-failed");return n***REMOVED***(t),r;{if(!navigator.onLine)throw M.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()***REMOVED***;return Object.assign(Object.assign({***REMOVED***,t),{authToken:e***REMOVED***)***REMOVED***(r);return n=async function(t,e){try{const n=await st(t,e),r=Object.assign(Object.assign({***REMOVED***,e),{authToken:n***REMOVED***);return await Y(t,r),n***REMOVED***catch(n){if(!C(n)||401!==n.serverCode&&404!==n.serverCode){const n=Object.assign(Object.assign({***REMOVED***,e),{authToken:{requestStatus:0***REMOVED******REMOVED***);await Y(t,n)***REMOVED***else await tt(t);throw n***REMOVED******REMOVED***(t,e),e***REMOVED******REMOVED***);return(n?await n:r.authToken).token***REMOVED***function ut(t){return et(t,t=>{if(!lt(t))throw M.create("not-registered");return function(t){return 1===t.requestStatus&&t.requestTime+D<Date.now()***REMOVED***(t.authToken)?Object.assign(Object.assign({***REMOVED***,t),{authToken:{requestStatus:0***REMOVED******REMOVED***):t***REMOVED***)***REMOVED***function lt(t){return void 0!==t&&2===t.registrationStatus***REMOVED***async function pt(t,e=!1){const n=L(t);return await async function(t){const{installationEntry:e,registrationPromise:n***REMOVED***=await rt(t);if(n)await n;else if(2!==e.registrationStatus)throw M.create("create-installation-failed")***REMOVED***(n),ct(n,e)***REMOVED***async function ft(t,e){const n=function(t,{fid:e***REMOVED***){return`${B(t)***REMOVED***/${e***REMOVED***`***REMOVED***(t,e),r={method:"DELETE",headers:x(t,e)***REMOVED***,i=await K(()=>fetch(n,r));if(!i.ok)throw await F("Delete Installation",i)***REMOVED***g.INTERNAL.registerService("installations",t=>(L(t),{app:t,getId:()=>(async function(t){const e=L(t),{installationEntry:n,registrationPromise:r***REMOVED***=await rt(e);return r&&r.catch(()=>{***REMOVED***),2===n.registrationStatus&&ct(e).catch(()=>{***REMOVED***),n.fid***REMOVED***)(t),getToken:e=>pt(t,e),delete:()=>(async function(t){const e=L(t),n=await et(e,t=>{if(!t||0!==t.registrationStatus)return t***REMOVED***);if(n){if(1===n.registrationStatus)throw M.create("delete-pending-registration");if(2===n.registrationStatus){if(!navigator.onLine)throw M.create("app-offline");await ft(e,n),await tt(e)***REMOVED******REMOVED******REMOVED***)(t)***REMOVED***));const ht="0.2.20",dt="FB-PERF-TRACE-START",gt="FB-PERF-TRACE-STOP",mt="FB-PERF-TRACE-MEASURE",bt="_wt_",_t="_fp",wt="_fcp",yt="_fid",vt="@firebase/performance/config",Et="@firebase/performance/configexpire",It=new r("performance","Performance",{"trace started":"Trace {$traceName***REMOVED*** was started before.","trace stopped":"Trace {$traceName***REMOVED*** is not running.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName***REMOVED*** is invalid.","invalid attribute value":"Attribute value {$attributeValue***REMOVED*** is invalid.","invalide custom metric name":"Custom metric name {$customMetricName***REMOVED*** is invalid"***REMOVED***);let St,Tt,At,Nt;class kt{constructor(t){if(!t)throw It.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)***REMOVED***getUrl(){return this.windowLocation.href.split("?")[0]***REMOVED***mark(t){this.performance&&this.performance.mark&&this.performance.mark(t)***REMOVED***measure(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)***REMOVED***getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]***REMOVED***getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]***REMOVED***getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)***REMOVED***requiredApisAvailable(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)***REMOVED***setupObserver(t,e){if(!this.PerformanceObserver)return;new this.PerformanceObserver(t=>{for(const n of t.getEntries())e(n)***REMOVED***).observe({entryTypes:[t]***REMOVED***)***REMOVED***static getInstance(){return void 0===St&&(St=new kt(Tt)),St***REMOVED******REMOVED***class Ot{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12***REMOVED***getAppId(){const t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw It.create("no app id");return t***REMOVED***getProjectId(){const t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw It.create("no project id");return t***REMOVED***getApiKey(){const t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw It.create("no api key");return t***REMOVED***static getInstance(){return void 0===At&&(At=new Ot),At***REMOVED******REMOVED***function Dt(){return Nt***REMOVED***var Rt;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t[t.PRERENDER=3]="PRERENDER",t[t.UNLOADED=4]="UNLOADED"***REMOVED***(Rt||(Rt={***REMOVED***));const jt=["firebase_","google_","ga_"],$t=new RegExp("^[a-zA-Z]\\w*$"),Pt=40,Mt=100;function Ct(){const t=kt.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1***REMOVED***function Lt(){switch(kt.getInstance().document.visibilityState){case"visible":return Rt.VISIBLE;case"hidden":return Rt.HIDDEN;case"prerender":return Rt.PRERENDER;default:return Rt.UNKNOWN***REMOVED******REMOVED***function Bt(){const t=kt.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0***REMOVED******REMOVED***const qt=new u("Performance");qt.logLevel=a.INFO;const Ft="0.0.1",Ut={loggingEnabled:!0***REMOVED***,xt="FIREBASE_INSTALLATIONS_AUTH";function Kt(t){const e=function(){const t=kt.getInstance().localStorage,e=t.getItem(Et);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;const r=t.getItem(vt);if(!r)return;try{const t=JSON.parse(r);return t***REMOVED***catch(t){return***REMOVED******REMOVED***();return e?(Ht(e),Promise.resolve()):function(t){return function(){const t=Ot.getInstance().firebaseAppInstance.installations().getToken();return t.then(t=>{***REMOVED***),t***REMOVED***().then(e=>{const n=Ot.getInstance().getProjectId(),r=`https://firebaseremoteconfig.googleapis.com/v1/projects/${n***REMOVED***/namespaces/fireperf:fetch?key=${Ot.getInstance().getApiKey()***REMOVED***`,i=new Request(r,{method:"POST",headers:{Authorization:`${xt***REMOVED*** ${e***REMOVED***`***REMOVED***,body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Ot.getInstance().getAppId(),app_version:ht,sdk_version:Ft***REMOVED***)***REMOVED***);return fetch(i).then(t=>{if(t.ok)return t.json();throw It.create("RC response not ok")***REMOVED***)***REMOVED***).catch(()=>{qt.info(Vt)***REMOVED***)***REMOVED***(t).then(t=>Ht(t)).then(t=>(function(t){if(!t)return;const e=kt.getInstance().localStorage;e.setItem(vt,JSON.stringify(t)),e.setItem(Et,String(Date.now()+60*Ot.getInstance().configTimeToLive*60*1e3))***REMOVED***)(t),()=>{***REMOVED***)***REMOVED***const Vt="Could not fetch config, will use default configs";function Ht(t){if(!t)return t;const e=Ot.getInstance(),n=t.entries||{***REMOVED***;return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Ut.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Wt(e.tracesSamplingRate),e.logNetworkAfterSampling=Wt(e.networkRequestsSamplingRate),t***REMOVED***function Wt(t){return Math.random()<=t***REMOVED***let Jt,zt=1;function Gt(){return zt=2,Jt=Jt||function(){const t=kt.getInstance().document;return new Promise(e=>{if(t&&"complete"!==t.readyState){const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())***REMOVED***;t.addEventListener("readystatechange",n)***REMOVED***else e()***REMOVED***)***REMOVED***().then(()=>(function(){const t=Ot.getInstance().firebaseAppInstance.installations().getId();return t.then(t=>{Nt=t***REMOVED***),t***REMOVED***)()).then(t=>Kt(t)).then(()=>Zt(),()=>Zt())***REMOVED***function Zt(){zt=3***REMOVED***const Qt=1e4,Xt=3;let Yt,te=Xt,ee=[];function ne(t){return(e,n,...r)=>{!function(t){if(!t.eventTime||!t.message)throw It.create("invalid cc log");ee=[...ee,t]***REMOVED***({message:t(...r),eventTime:Date.now()***REMOVED***)***REMOVED******REMOVED***function re(){if(Yt)return Yt;const t=ne(ae);return(Yt=new u("@firebase/performance/cc")).logHandler=t,Yt***REMOVED***function ie(t){const e=Ot.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&kt.getInstance().requiredApisAvailable()&&(t.isAuto&&Lt()!==Rt.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===zt?oe(t):Gt().then(()=>oe(t),()=>oe(t))))***REMOVED***function oe(t){Dt()&&setTimeout(()=>re().log(t,1),0)***REMOVED***function ae(t,e){return 0===e?function(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs***REMOVED***,n={application_info:se(),network_request_metric:e***REMOVED***;return JSON.stringify(n)***REMOVED***(t):function(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs***REMOVED***;0!==Object.keys(t.counters).length&&(e.counters=ce(t.counters));const n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=ce(n));const r={application_info:se(),trace_metric:e***REMOVED***;return JSON.stringify(r)***REMOVED***(t)***REMOVED***function se(){return{google_app_id:Ot.getInstance().getAppId(),app_instance_id:Dt(),web_app_info:{sdk_version:ht,page_url:kt.getInstance().getUrl(),service_worker_status:Ct(),visibility_state:Lt(),effective_connection_type:Bt()***REMOVED***,application_process_state:0***REMOVED******REMOVED***function ce(t){return Object.keys(t).map(e=>({key:e,value:t[e]***REMOVED***))***REMOVED***!function t(e){setTimeout(()=>{if(0===te)return;if(!ee.length)return t(Qt);const e=[...ee];ee=[];const n=e.map(t=>({source_extension_json:t.message,event_time_ms:String(t.eventTime)***REMOVED***)),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{***REMOVED******REMOVED***,log_source:Ot.getInstance().logSource,log_event:n***REMOVED***;fetch(Ot.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)***REMOVED***).then(t=>(t.ok||qt.info("Call to Firebase backend failed."),t.json())).then(e=>{const n=Number(e.next_request_wait_millis),r=isNaN(n)?Qt:Math.max(Qt,n);te=Xt,t(r)***REMOVED***).catch(()=>{ee=[...e,...ee],te--,qt.info(`Tries left: ${te***REMOVED***.`),t(Qt)***REMOVED***)***REMOVED***,e)***REMOVED***(5500);const ue=100,le="_",pe=[_t,wt,yt];class fe{constructor(t,e=!1,n){this.name=t,this.isAuto=e,this.state=1,this.customAttributes={***REMOVED***,this.counters={***REMOVED***,this.api=kt.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`${dt***REMOVED***-${this.randomId***REMOVED***-${this.name***REMOVED***`,this.traceStopMark=`${gt***REMOVED***-${this.randomId***REMOVED***-${this.name***REMOVED***`,this.traceMeasure=n||`${mt***REMOVED***-${this.randomId***REMOVED***-${this.name***REMOVED***`,n&&this.calculateTraceMetrics())***REMOVED***start(){if(1!==this.state)throw It.create("trace started",{traceName:this.name***REMOVED***);this.api.mark(this.traceStartMark),this.state=2***REMOVED***stop(){if(2!==this.state)throw It.create("trace stopped",{traceName:this.name***REMOVED***);this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ie(this)***REMOVED***record(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object.assign({***REMOVED***,n.attributes)),n&&n.metrics)for(const t of Object.keys(n.metrics))isNaN(Number(n.metrics[t]))||(this.counters[t]=Number(Math.floor(n.metrics[t])));ie(this)***REMOVED***incrementMetric(t,e=1){void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e***REMOVED***putMetric(t,e){if(n=t,r=this.name,0===n.length||n.length>ue||!(r&&r.startsWith(bt)&&pe.indexOf(n)>-1)&&n.startsWith(le))throw It.create("invalide custom metric name",{customMetricName:t***REMOVED***);var n,r;this.counters[t]=e***REMOVED***getMetric(t){return this.counters[t]||0***REMOVED***putAttribute(t,e){const n=!(0===(r=t).length||r.length>Pt||jt.some(t=>r.startsWith(t))||!r.match($t));var r;const i=function(t){return 0!==t.length&&t.length<=Mt***REMOVED***(e);if(n&&i)this.customAttributes[t]=e;else{if(!n)throw It.create("invalid attribute name",{attributeName:t***REMOVED***);if(!i)throw It.create("invalid attribute value",{attributeValue:e***REMOVED***)***REMOVED******REMOVED***getAttribute(t){return this.customAttributes[t]***REMOVED***removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]***REMOVED***getAttributes(){return Object.assign({***REMOVED***,this.customAttributes)***REMOVED***setStartTime(t){this.startTimeUs=t***REMOVED***setDuration(t){this.durationUs=t***REMOVED***calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))***REMOVED***static createOobTrace(t,e,n){const r=kt.getInstance().getUrl();if(!r)return;const i=new fe(bt+r,!0),o=Math.floor(1e3*kt.getInstance().getTimeOrigin());i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(e){const t=e.find(t=>"first-paint"===t.name);t&&t.startTime&&i.putMetric(_t,Math.floor(1e3*t.startTime));const r=e.find(t=>"first-contentful-paint"===t.name);r&&r.startTime&&i.putMetric(wt,Math.floor(1e3*r.startTime)),n&&i.putMetric(yt,Math.floor(1e3*n))***REMOVED***ie(i)***REMOVED***static createUserTimingTrace(t){ie(new fe(t,!1,t))***REMOVED******REMOVED***function he(t){const e=t;if(!e||void 0===e.responseStart)return;const n=kt.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){const e=Ot.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(()=>re().log(t,0),0)***REMOVED***({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o***REMOVED***)***REMOVED***const de=5e3;function ge(){Dt()&&(setTimeout(()=>(function(){const t=kt.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){let r=setTimeout(()=>{fe.createOobTrace(e,n),r=void 0***REMOVED***,de);t.onFirstInputDelay(t=>{r&&(clearTimeout(r),fe.createOobTrace(e,n,t))***REMOVED***)***REMOVED***else fe.createOobTrace(e,n)***REMOVED***)(),0),setTimeout(()=>(function(){const t=kt.getInstance(),e=t.getEntriesByType("resource");for(const t of e)he(t);t.setupObserver("resource",he)***REMOVED***)(),0),setTimeout(()=>(function(){const t=kt.getInstance(),e=t.getEntriesByType("measure");for(const t of e)me(t);t.setupObserver("measure",me)***REMOVED***)(),0))***REMOVED***function me(t){const e=t.name;e.substring(0,mt.length)!==mt&&fe.createUserTimingTrace(e)***REMOVED***class be{constructor(t){this.app=t,kt.getInstance().requiredApisAvailable()?Gt().then(ge,ge):qt.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")***REMOVED***trace(t){return new fe(t)***REMOVED***set instrumentationEnabled(t){Ot.getInstance().instrumentationEnabled=t***REMOVED***get instrumentationEnabled(){return Ot.getInstance().instrumentationEnabled***REMOVED***set dataCollectionEnabled(t){Ot.getInstance().dataCollectionEnabled=t***REMOVED***get dataCollectionEnabled(){return Ot.getInstance().dataCollectionEnabled***REMOVED******REMOVED***const _e="[DEFAULT]";return function(t){t.INTERNAL.registerService("performance",t=>{if(t.name!==_e)throw It.create("FB not default");if("undefined"==typeof window)throw It.create("no window");return function(t){Tt=t***REMOVED***(window),Ot.getInstance().firebaseAppInstance=t,new be(t)***REMOVED***,{***REMOVED***)***REMOVED***(g),g***REMOVED***);
//# sourceMappingURL=firebase-performance-standalone.es2017.js.map
