/**
 * @license Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * @fileoverview Firebase namespace and Firebase App API - INTERNAL methods.
 * @externs
 */

/**
 * @param {string***REMOVED*** name Service name
 * @param {!firebase.ServiceFactory***REMOVED*** createService
 * @param {Object=***REMOVED*** serviceProperties
 * @param {(function(string, !firebase.app.App): void)=***REMOVED*** appHook
 * @param {boolean=***REMOVED*** allowMultipleInstances Whether the service registered
 *   supports multiple instances on the same app.
 * @return {firebase.ServiceNamespace***REMOVED***
 */
firebase.INTERNAL.registerService = function(
  name,
  createService,
  serviceProperties,
  appHook,
  allowMultipleInstances
) {***REMOVED***;

/** @param {!Object***REMOVED*** props */
firebase.INTERNAL.extendNamespace = function(props) {***REMOVED***;

firebase.INTERNAL.resetNamespace = function() {***REMOVED***;

/** @typedef {function(*): void***REMOVED*** */
firebase.NextFn;

/** @typedef {function(!Error): void***REMOVED*** */
firebase.ErrorFn;

/**
 * @typedef {function((firebase.NextFn|firebase.Observer)=,
 *                    firebase.ErrorFn=,
 *                    firebase.CompleteFn=): firebase.Unsubscribe***REMOVED***
 */
firebase.Subscribe;

/**
 * @param {function (!firebase.Observer): void***REMOVED*** executor
 * @param {(function (!firebase.Observer): void)=***REMOVED*** onNoObservers
 * @return {!firebase.Subscribe***REMOVED***
 */
firebase.INTERNAL.createSubscribe = function(executor, onNoObservers) {***REMOVED***;

/**
 * @param {****REMOVED*** target
 * @param {****REMOVED*** source
 */
firebase.INTERNAL.deepExtend = function(target, source) {***REMOVED***;

/** @param {string***REMOVED*** name */
firebase.INTERNAL.removeApp = function(name) {***REMOVED***;

/**
 * @type {!Object<string,
 *                function(!firebase.app.App,
 *                         (function(!Object): void)=,
 *                         string=): firebase.Service>***REMOVED***
 */
firebase.INTERNAL.factories = {***REMOVED***;

/**
 * @param {!firebase.app.App***REMOVED*** app
 * @param {string***REMOVED*** serviceName
 * @return {string|null***REMOVED***
 */
firebase.INTERNAL.useAsService = function(app, serviceName) {***REMOVED***;

/**
 * @constructor
 * @param {string***REMOVED*** service All lowercase service code (e.g., 'auth')
 * @param {string***REMOVED*** serviceName Display service name (e.g., 'Auth')
 * @param {!Object<string, string>***REMOVED*** errors
 */
firebase.INTERNAL.ErrorFactory = function(service, serviceName, errors) {***REMOVED***;

/**
 * @param {string***REMOVED*** code
 * @param {Object=***REMOVED*** data
 * @return {!firebase.FirebaseError***REMOVED***
 */
firebase.INTERNAL.ErrorFactory.prototype.create = function(code, data) {***REMOVED***;

/** @interface */
firebase.Service = function() {***REMOVED***;

/** @type {!firebase.app.App***REMOVED*** */
firebase.Service.prototype.app;

/** @type {!Object***REMOVED*** */
firebase.Service.prototype.INTERNAL;

/** @return {firebase.Promise<void>***REMOVED*** */
firebase.Service.prototype.INTERNAL.delete = function() {***REMOVED***;

/**
 * @typedef {function(!firebase.app.App,
 *                    !function(!Object): void,
 *                    string=): !firebase.Service***REMOVED***
 */
firebase.ServiceFactory;

/** @interface */
firebase.ServiceNamespace = function() {***REMOVED***;

/**
 * Given an (optional) app, return the instance of the service
 * associated with that app.
 *
 * @param {firebase.app.App=***REMOVED*** app
 * @return {!firebase.Service***REMOVED***
 */
firebase.ServiceNamespace.prototype.app = function(app) {***REMOVED***;

/**
 * Firebase App.INTERNAL methods - default implementations in firebase-app,
 * replaced by Auth ...
 */

/**
 * Listener for an access token.
 *
 * Should pass null when the user current user is no longer value (signed
 * out or credentials become invalid).
 *
 * Firebear does not currently auto-refresh tokens, BTW - but this interface
 * would support that in the future.
 *
 * @typedef {function(?string): void***REMOVED***
 */
firebase.AuthTokenListener;

/**
 * Returned from app.INTERNAL.getToken().
 *
 * @typedef {{
 *   accessToken: (string)
 * ***REMOVED******REMOVED***
 */
firebase.AuthTokenData;

/** @type {!Object***REMOVED*** */
firebase.app.App.prototype.INTERNAL;

/**
 * app.INTERNAL.getUid()
 *
 * @return {?string***REMOVED***
 */
firebase.app.App.prototype.INTERNAL.getUid = function() {***REMOVED***;

/**
 * app.INTERNAL.getToken()
 *
 * @param {boolean=***REMOVED*** forceRefresh Whether to force sts token refresh.
 * @return {!Promise<?firebase.AuthTokenData>***REMOVED***
 */
firebase.app.App.prototype.INTERNAL.getToken = function(forceRefresh) {***REMOVED***;

/**
 * Adds an auth state listener.
 *
 * @param {!firebase.AuthTokenListener***REMOVED*** listener The auth state listener.
 */
firebase.app.App.prototype.INTERNAL.addAuthTokenListener = function(
  listener
) {***REMOVED***;

/**
 * Removes an auth state listener.
 *
 * @param {!firebase.AuthTokenListener***REMOVED*** listener The auth state listener.
 */
firebase.app.App.prototype.INTERNAL.removeAuthTokenListener = function(
  listener
) {***REMOVED***;
